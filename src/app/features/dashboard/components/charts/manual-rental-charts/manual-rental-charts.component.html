<app-dialog
  [(visible)]="visible"
  [header]="'MANUAL_RENTALS_FORM.CHARTS.TITLE' | translate"
  [icon]="'pi pi-chart-line'"
  [showFooter]="false"
  [width]="'90vw'"
  [maxWidth]="'1200px'"
>
  <div>
    @if (rentals().length > 0) {
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
        <!-- Chart 1: Distribution -->
        <div class="bg-surface-0 dark:bg-surface-900 p-4 rounded-xl border border-surface-200 dark:border-surface-700 shadow-sm min-h-[350px]">
          <div echarts [options]="houseChartOption()" class="h-[300px] w-full"></div>
        </div>

        <!-- Chart 2: Monthly -->
        <div class="flex flex-col gap-2">
          <h3 class="text-sm font-medium text-surface-600 dark:text-surface-400 text-center">
            {{ selectedYear() === 'ALL' ? ('MANUAL_RENTALS_FORM.CHARTS.MONTHLY_ALL' | translate) : ('MANUAL_RENTALS_FORM.CHARTS.MONTHLY' | translate: { year: selectedYear() }) }}
          </h3>
          @if (monthlyChartData(); as data) {
            <app-stacked-bar-chart
              [series]="data.series"
              [labels]="data.labels"
              [groups]="data.groups"
              height="300px"
              minWidth="100%"
            />
          }
        </div>

        <!-- Chart 3: Annual (Full width on lg) -->
        <div class="lg:col-span-2 bg-surface-0 dark:bg-surface-900 p-4 rounded-xl border border-surface-200 dark:border-surface-700 shadow-sm min-h-[350px]">
          <div echarts [options]="annualChartOption()" class="h-[300px] w-full"></div>
        </div>
      </div>
    } @else {
      <div class="flex flex-col items-center justify-center p-12 text-surface-500 gap-3">
        <i class="pi pi-chart-line text-5xl opacity-20"></i>
        <span>{{ 'MANUAL_RENTALS_FORM.CHARTS.NO_DATA' | translate }}</span>
      </div>
    }
  </div>
</app-dialog>
