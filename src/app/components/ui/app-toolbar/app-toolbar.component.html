<p-toolbar class="toolbar-shell !py-1" aria-label="Barra superior">

  <!-- BotÃ£o de Menu -->
  <ng-template pTemplate="start">
    <div class="flex items-center gap-2">
      <p-button
        icon="pi pi-bars"
        [text]="true"
        [rounded]="true"
        class="lg:hidden"
        (onClick)="toggleMenu.emit()"
      />
      <span aria-label="Logo Airbnb" class="flex items-center">
        <img src="airbnb_black.svg" alt="Airbnb Logo" class="h-6 mr-2" />
        <span class="hidden sm:inline">Airbnb Control</span>
      </span>
    </div>
  </ng-template>

  <ng-template pTemplate="end">
    <p-button
      [icon]="currentTheme.icon"
      [rounded]="true"
      [text]="true"
      (onClick)="toggleTheme()"
      [pTooltip]="currentTheme.name | translate"
      tooltipPosition="top"
      class="mr-2"
    />

    <p-button
      [label]="'TOOLBAR.LOGIN' | translate"
      icon="pi pi-user"
      [text]="true"
      (onClick)="userMenu.toggle($event)"
    />

    <p-tieredMenu #userMenu [model]="userMenuItems()" [popup]="true" appendTo="body">
      <ng-template pTemplate="item" let-item>
        <!-- Custom Template for Items -->
        <!-- Case 1: Language Root Item -->
        @if (item.data?.isLanguage) {
          <div class="p-menuitem-content flex items-center gap-2 p-2">
            <!-- Show Flag and Name like the old Select -->
            @if (item.data.currentLang?.flag) {
              <img [src]="item.data.currentLang.flag" class="w-5 h-4 object-contain" alt="flag" />
            }
            <span>{{ 'TOOLBAR.LANGUAGE' | translate }} ({{ item.data.currentLang?.name }})</span>
            <span class="ml-auto pi pi-angle-right"></span>
          </div>
        }

        <!-- Case 2: Language Options (Submenu items) -->
        @else if (item.data?.isLanguageOption) {
          <div class="p-menuitem-content flex items-center gap-2 p-2">
            @if (item.data.lang?.flag) {
              <img [src]="item.data.lang.flag" class="w-5 h-4 object-contain" alt="flag" />
            }
            <span>{{ item.data.lang.name }}</span>
          </div>
        }

        <!-- Case 3: Logout -->
        @else if (item.data?.isLogout) {
          <div class="p-menuitem-content flex items-center gap-2 p-2">
            <span [class]="item.icon"></span>
            <span>{{ 'TOOLBAR.LOGOUT' | translate }}</span>
          </div>
        }

        <!-- Case 4: Default fallback (if any) -->
        @else {
          <div class="p-menuitem-content flex items-center gap-2 p-2">
            @if (item.icon) {
              <span [class]="item.icon"></span>
            }
            <span>{{ item.label }}</span>
          </div>
        }
      </ng-template>
    </p-tieredMenu>
  </ng-template>
</p-toolbar>
